(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67a01ea2"],{"91b3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v(t._s(t.$t("table.add")))])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,"row-key":"id",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:t.$t("table.id"),prop:"id",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("spucategory.categoryOne"),"min-width":"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.categoryOne))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("spucategory.categoryTwo"),"min-width":"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.categoryTwo))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("spucategory.categoryThree"),"min-width":"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.categoryThree))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.actions"),align:"center",width:"230","class-name":"small-padding table-actions"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(r)}}},[t._v(t._s(t.$t("table.delete")))])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"100px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:t.$t("spucategory.categoryOne"),prop:"categoryOneId"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},on:{change:t.categoryOneChange},model:{value:t.temp.categoryOneId,callback:function(e){t.$set(t.temp,"categoryOneId",e)},expression:"temp.categoryOneId"}},t._l(t.categoryOneList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("spucategory.categoryTwo"),prop:"categoryTwoId"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},on:{change:t.categoryTwoChange},model:{value:t.temp.categoryTwoId,callback:function(e){t.$set(t.temp,"categoryTwoId",e)},expression:"temp.categoryTwoId"}},t._l(t.categoryTwoList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("spucategory.categoryThree"),prop:"categoryThreeId"}},[a("el-select",{staticClass:"filter-item",attrs:{placeholder:"Please select"},model:{value:t.temp.categoryThreeId,callback:function(e){t.$set(t.temp,"categoryThreeId",e)},expression:"temp.categoryThreeId"}},t._l(t.categoryThreeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v(t._s(t.$t("table.confirm")))])],1)],1)],1)},n=[],o=(a("7f7f"),a("ac6a"),a("5df3"),a("f400"),a("c40e")),i=a("c405"),c=a("4be7"),l={name:"SpuCategoryList",filters:{},data:function(){return{spuId:this.$route.params&&this.$route.params.spuId||0,tableKey:0,list:[],categoryDataMap:null,categoryOneList:[],categoryTwoList:[],categoryThreeList:[],listLoading:!0,listQuery:{spuId:0},temp:{id:void 0,spuId:0,categoryOneId:null,categoryTwoId:null,categoryThreeId:null},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"Edit",create:"Create"},rules:{categoryOneId:[{required:!0,message:"category one is required",trigger:"change"}],categoryTwoId:[{required:!0,message:"category two is required",trigger:"change"}],categoryThreeId:[{required:!0,message:"category three is required",trigger:"change"}]}}},created:function(){this.getList()},methods:{getList:function(){this.listLoading=!0,this.listQuery.spuId=this.spuId;var t=this;Object(i["c"])().then(function(e){return new c["Promise"](function(a,r){t.categoryDataMap=new Map,t.categoryOneList=[];for(var n=null,o=0;o<e.data.length;++o)n={id:e.data[o].id,name:e.data[o].name,pic:e.data[o].pic,level:e.data[o].level,parentId:e.data[o].parentId,children:[]},t.categoryDataMap.set(n.id,n),1===n.level&&t.categoryOneList.push(n);for(var i=0;i<e.data.length;++i)n=e.data[i],0!==n.parentId&&t.categoryDataMap.get(n.parentId).children.push(n);a()})}).then(function(){return Object(o["h"])(t.listQuery)}).then(function(e){for(var a=[],r=null,n=0;n<e.data.length;++n)r=e.data[n],a.push({id:r.id,spuId:r.spuId,categoryOneId:r.categoryOneId,categoryOne:t.categoryDataMap.get(r.categoryOneId).name,categoryTwoId:r.categoryTwoId,categoryTwo:t.categoryDataMap.get(r.categoryTwoId).name,categoryThreeId:r.categoryThreeId,categoryThree:t.categoryDataMap.get(r.categoryThreeId).name});t.list=a,t.listLoading=!1})},resetTemp:function(){this.temp={id:void 0,spuId:this.spuId,categoryOneId:null,categoryTwoId:null,categoryThreeId:null},this.categoryTwoList=[],this.categoryThreeList=[]},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},categoryOneChange:function(t){this.temp.categoryTwoId=null,this.temp.categoryThreeId=null,this.categoryTwoList=this.categoryDataMap.get(t).children,this.categoryThreeList=[]},categoryTwoChange:function(t){this.temp.categoryThreeId=null,this.categoryThreeList=this.categoryDataMap.get(t).children},createData:function(){var t=this;this.$refs["dataForm"].validate(function(e){e&&Object(o["c"])(t.temp).then(function(){t.getList(),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})})})},handleDelete:function(t){var e=this;Object(o["f"])(t.id).then(function(){e.getList(),e.$message({message:"删除成功",type:"success"})})}}},s=l,u=a("2877"),d=Object(u["a"])(s,r,n,!1,null,null,null);e["default"]=d.exports},c405:function(t,e,a){"use strict";a.d(e,"c",function(){return n}),a.d(e,"a",function(){return o}),a.d(e,"d",function(){return i}),a.d(e,"b",function(){return c});var r=a("b775");function n(){return Object(r["a"])({url:"/GOODS/categoryList",method:"get"})}function o(t){return Object(r["a"])({url:"/GOODS/category",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/GOODS/category",method:"put",data:t})}function c(t){return Object(r["a"])({url:"/GOODS/category",method:"delete",data:t})}},c40e:function(t,e,a){"use strict";a.d(e,"i",function(){return n}),a.d(e,"e",function(){return o}),a.d(e,"b",function(){return i}),a.d(e,"l",function(){return c}),a.d(e,"m",function(){return l}),a.d(e,"g",function(){return s}),a.d(e,"d",function(){return u}),a.d(e,"a",function(){return d}),a.d(e,"j",function(){return g}),a.d(e,"k",function(){return p}),a.d(e,"h",function(){return h}),a.d(e,"c",function(){return y}),a.d(e,"f",function(){return f});var r=a("b775");function n(t){return Object(r["a"])({url:"/GOODS/spuList",method:"get",params:t})}function o(t){return Object(r["a"])({url:"/GOODS/spu",method:"delete",data:{id:t}})}function i(t){return Object(r["a"])({url:"/GOODS/spu",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/GOODS/spu",method:"put",data:t})}function l(t){return Object(r["a"])({url:"/GOODS/spuStatus",method:"put",params:t})}function s(t){return Object(r["a"])({url:"/GOODS/skuList",method:"get",params:t})}function u(t){return Object(r["a"])({url:"/GOODS/sku",method:"delete",data:{id:t}})}function d(t){return Object(r["a"])({url:"/GOODS/sku",method:"post",data:t})}function g(t){return Object(r["a"])({url:"/GOODS/sku",method:"put",data:t})}function p(t){return Object(r["a"])({url:"/GOODS/skuStatus",method:"put",params:t})}function h(t){return Object(r["a"])({url:"/GOODS/spucategorylist",method:"get",params:t})}function y(t){return Object(r["a"])({url:"/GOODS/spucategory",method:"post",data:t})}function f(t){return Object(r["a"])({url:"/GOODS/spucategory",method:"delete",data:{id:t}})}}}]);