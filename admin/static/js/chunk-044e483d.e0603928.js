(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-044e483d"],{"0171":function(t,e,i){"use strict";var s=i("3cc2"),n=i.n(s);n.a},"09f4":function(t,e,i){"use strict";i.d(e,"a",function(){return o}),Math.easeInOutQuad=function(t,e,i,s){return t/=s/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function n(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(t,e,i){var o=a(),r=t-o,l=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=l;var a=Math.easeInOutQuad(c,o,r,e);n(a),c<e?s(t):i&&"function"===typeof i&&i()};u()}},"127f":function(t,e,i){"use strict";var s=i("9b15"),n=i.n(s),a=new n.a({region:"oss-cn-hangzhou",accessKeyId:"LTAI94ikRecJvHtv",accessKeySecret:"ja7PZSUtJZcbsrARdlWTe0780bDUZv",bucket:"shopincat"});e["a"]=a},"3cc2":function(t,e,i){},"62c4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:t.$t("table.title")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(t._s(t.$t("table.search")))]),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v(t._s(t.$t("table.add")))])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,"row-key":"id",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:t.$t("table.id"),prop:"id",align:"center",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("goods.spu"),width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.spu))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("goods.title"),width:"230",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.title))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("goods.description"),width:"230",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(JSON.stringify(e.row.description)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("goods.tags"),width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.tags))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("goods.skuPics"),width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.pic,fit:"contain"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("table.actions"),align:"center","class-name":"small-padding table-actions"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleUpdate(s)}}},[t._v(t._s(t.$t("table.edit")))]),t._v(" "),0!=s.status?i("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleModifyStatus(s)}}},[t._v(t._s(t.$t("table.offshelf")))]):t._e(),t._v(" "),0==s.status?i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.handleModifyStatus(s)}}},[t._v(t._s(t.$t("table.onshelf")))]):t._e(),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(s)}}},[t._v(t._s(t.$t("table.delete")))]),t._v(" "),i("router-link",{attrs:{to:"/goods/skulist/"+s.id}},[i("el-button",{attrs:{size:"mini",type:"success"}},[t._v(t._s(t.$t("table.skuManage")))])],1),t._v(" "),i("router-link",{attrs:{to:"/goods/spucategorylist/"+s.id}},[i("el-button",{attrs:{size:"mini",type:"success"}},[t._v(t._s(t.$t("table.categoryManage")))])],1)]}}])})],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),t._v(" "),i("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"600px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"70px"}},[i("el-form-item",{attrs:{label:t.$t("goods.spu"),prop:"spu"}},[i("el-input",{model:{value:t.temp.spu,callback:function(e){t.$set(t.temp,"spu",e)},expression:"temp.spu"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("goods.title"),prop:"title"}},[i("el-input",{model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("goods.description"),prop:"description"}},t._l(t.temp.description,function(e,s){return i("div",{key:s,staticClass:"form-description",attrs:{value:e}},[i("div",{staticClass:"description-input"},[i("el-input",{staticStyle:{width:"130px","margin-right":"20px"},model:{value:e.key,callback:function(i){t.$set(e,"key",i)},expression:"item.key"}}),t._v(" "),i("el-input",{staticStyle:{width:"250px"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1),t._v(" "),i("div",{staticClass:"description-action"},[s==t.temp.description.length-1?i("i",{staticClass:"el-icon-circle-plus",on:{click:t.handleAddDescription}}):t._e(),t._v(" "),i("i",{staticClass:"el-icon-remove",on:{click:function(e){return t.handleRemoveDescription(s)}}})])])}),0),t._v(" "),i("el-form-item",{attrs:{label:t.$t("goods.tags"),prop:"tags"}},[i("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:t.$t("goods.tagsPlaceHolder")},model:{value:t.temp.tags,callback:function(e){t.$set(t.temp,"tags",e)},expression:"temp.tags"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("goods.video"),prop:"video"}},[i("el-upload",{attrs:{accept:".mp4","show-file-list":!1,action:"","http-request":t.handleUploadVideo}},[t.temp.video?i("video",{staticStyle:{width:"300px",height:"300px","object-fit":"contain","margin-left":"50px"},attrs:{src:t.temp.video,controls:"controls"}}):t._e(),t._v(" "),i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选择视频")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("goods.skuPics"),prop:"skuPics"}},t._l(t.temp.skuPics,function(e,s){return i("div",{key:s,attrs:{value:e}},[i("div",{staticClass:"form-skupics"},[i("div",{staticClass:"skupics-input"},[i("el-input",{staticStyle:{width:"130px","margin-bottom":"8px"},attrs:{placeholder:t.$t("goods.color")},model:{value:e.color,callback:function(i){t.$set(e,"color",i)},expression:"item.color"}}),t._v(" "),i("el-upload",{attrs:{accept:".jpg, .jpeg, .png, .gif, .bmp, .JPG, .JPEG, .GIF, .BMP","list-type":"picture-card","file-list":e.picList,"on-remove":t.handleRemoveSkuPic,action:"",data:{index:s},"http-request":t.handleUploadPic,multiple:""}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选择图片")])],1)],1),t._v(" "),i("div",{staticClass:"skupics-action"},[s==t.temp.skuPics.length-1?i("i",{staticClass:"el-icon-circle-plus",on:{click:t.handleAddSkuPics}}):t._e(),t._v(" "),i("i",{staticClass:"el-icon-remove",on:{click:function(e){return t.handleRemoveSkuPics(s)}}})])]),t._v(" "),s!=t.temp.skuPics.length-1?i("el-divider"):t._e()],1)}),0)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v(t._s(t.$t("table.confirm")))])],1)],1)],1)},n=[],a=(i("7f7f"),i("96cf"),i("3b8d")),o=i("c40e"),r=i("6724"),l=i("333d"),c=i("127f"),u={name:"SpuList",components:{Pagination:l["a"]},directives:{waves:r["a"]},filters:{},data:function(){return{tableKey:0,list:[],total:0,listLoading:!0,listQuery:{page:1,limit:20,title:""},temp:{id:void 0,title:"",spu:"",description:[{key:"Style",value:""},{key:"Occasion",value:""},{key:"Material",value:""}],tags:"",video:"",skuPics:[{color:"",picList:[]}]},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"Edit",create:"Create"},rules:{spu:[{required:!0,message:"spu is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"change"}],description:[{required:!0,message:"description is required",trigger:"change"}],tags:[{required:!0,message:"tags is required",trigger:"change"}]}}},created:function(){this.getList()},methods:{handleFilter:function(){this.getList()},getList:function(){var t=this;this.listLoading=!0,Object(o["i"])(this.listQuery).then(function(e){t.list=e.data,t.total=t.listQuery.limit,t.listLoading=!1})},handleModifyStatus:function(t){var e=this,i=Object.assign({},t);i.status=1-i.status,Object(o["m"])({id:i.id,status:i.status}).then(function(){e.getList(),e.$message({message:"操作成功",type:"success"})})},handleDelete:function(t){var e=this;Object(o["e"])(t.id).then(function(){e.getList(),e.$message({message:"删除成功",type:"success"})})},resetTemp:function(){this.temp={id:void 0,title:"",spu:"",description:[{key:"Style",value:""},{key:"Occasion",value:""},{key:"Material",value:""}],tags:"",video:"",skuPics:[{color:"",picList:[]}]}},handleUploadPic:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i="goods/"+this.$md5("shopincat"+e.file.uid+e.file.name),t.next=4,c["a"].put(i,e.file);case 4:s=t.sent,this.temp.skuPics[e.data.index].picList.push({name:s.name,url:s.url}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function e(e){return t.apply(this,arguments)}return e}(),handleUploadVideo:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i="video/"+this.$md5("shopincat"+e.file.uid+e.file.name),t.next=4,c["a"].put(i,e.file);case 4:s=t.sent,this.temp.video=s.url,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));function e(e){return t.apply(this,arguments)}return e}(),handleRemoveSkuPic:function(t,e){for(var i=0;i<this.temp.skuPics.length;++i)for(var s=0;s<this.temp.skuPics[i].picList.length;++s)if(t.url===this.temp.skuPics[i].picList[s].url){this.temp.skuPics[i].picList.splice(s,1);break}},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},createData:function(){var t=this;this.$refs["dataForm"].validate(function(e){e&&Object(o["b"])(t.temp).then(function(e){t.getList(),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})})})},handleRemoveDescription:function(t){this.temp.description.splice(t,1)},handleAddDescription:function(){this.temp.description.push({key:"",value:""})},handleRemoveSkuPics:function(t){this.temp.skuPics.splice(t,1)},handleAddSkuPics:function(){this.temp.skuPics.push({color:"",picList:[]})},handleUpdate:function(t){var e=this;this.temp=Object.assign({},t),0===this.temp.skuPics.length&&(this.temp.skuPics=[{color:"",picList:[]}]),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},updateData:function(){var t=this;this.$refs["dataForm"].validate(function(e){if(e){var i=Object.assign({},t.temp);Object(o["l"])(i).then(function(){t.getList(),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})}})}}},d=u,p=(i("0171"),i("2877")),m=Object(p["a"])(d,s,n,!1,null,"5385aa01",null);e["default"]=m.exports},6724:function(t,e,i){"use strict";i("8d41");var s="@@wavesContext";function n(t,e){function i(i){var s=Object.assign({},e.value),n=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},s),a=n.ele;if(a){a.style.position="relative",a.style.overflow="hidden";var o=a.getBoundingClientRect(),r=a.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":(r=document.createElement("span"),r.className="waves-ripple",r.style.height=r.style.width=Math.max(o.width,o.height)+"px",a.appendChild(r)),n.type){case"center":r.style.top=o.height/2-r.offsetHeight/2+"px",r.style.left=o.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(i.pageY-o.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(i.pageX-o.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=n.color,r.className="waves-ripple z-active",!1}}return t[s]?t[s].removeHandle=i:t[s]={removeHandle:i},i}var a={bind:function(t,e){t.addEventListener("click",n(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[s].removeHandle,!1),t.addEventListener("click",n(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[s].removeHandle,!1),t[s]=null,delete t[s]}},o=function(t){t.directive("waves",a)};window.Vue&&(window.waves=a,Vue.use(o)),a.install=o;e["a"]=a},"8d41":function(t,e,i){},c40e:function(t,e,i){"use strict";i.d(e,"i",function(){return n}),i.d(e,"e",function(){return a}),i.d(e,"b",function(){return o}),i.d(e,"l",function(){return r}),i.d(e,"m",function(){return l}),i.d(e,"g",function(){return c}),i.d(e,"d",function(){return u}),i.d(e,"a",function(){return d}),i.d(e,"j",function(){return p}),i.d(e,"k",function(){return m}),i.d(e,"h",function(){return f}),i.d(e,"c",function(){return v}),i.d(e,"f",function(){return h});var s=i("b775");function n(t){return Object(s["a"])({url:"/GOODS/spuList",method:"get",params:t})}function a(t){return Object(s["a"])({url:"/GOODS/spu",method:"delete",data:{id:t}})}function o(t){return Object(s["a"])({url:"/GOODS/spu",method:"post",data:t})}function r(t){return Object(s["a"])({url:"/GOODS/spu",method:"put",data:t})}function l(t){return Object(s["a"])({url:"/GOODS/spuStatus",method:"put",params:t})}function c(t){return Object(s["a"])({url:"/GOODS/skuList",method:"get",params:t})}function u(t){return Object(s["a"])({url:"/GOODS/sku",method:"delete",data:{id:t}})}function d(t){return Object(s["a"])({url:"/GOODS/sku",method:"post",data:t})}function p(t){return Object(s["a"])({url:"/GOODS/sku",method:"put",data:t})}function m(t){return Object(s["a"])({url:"/GOODS/skuStatus",method:"put",params:t})}function f(t){return Object(s["a"])({url:"/GOODS/spucategorylist",method:"get",params:t})}function v(t){return Object(s["a"])({url:"/GOODS/spucategory",method:"post",data:t})}function h(t){return Object(s["a"])({url:"/GOODS/spucategory",method:"delete",data:{id:t}})}}}]);